{% load static %}
<!doctype html>
<html lang="fa">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>WP-Project | داشبورد</title>
    <link rel="stylesheet" href="{% static 'demo/styles.css' %}" />
  </head>
  <body dir="rtl">
    <main class="landing">
      <section class="card">
        <div class="panel-header">
          <h1>داشبورد مدیریتی</h1>
          <div style="display: flex; gap: 8px; align-items: center;">
            <a href="/dashboard/" class="ghost">بازگشت</a>
            <button id="logoutBtn" class="button ghost">خروج</button>
          </div>
        </div>
        <p class="subtitle">
          در حال حاضر این صفحه صرفاً راهنماست. برای اختصاص نقش‌ها و تعریف سطوح جدید لطفاً با حساب ادمین وارد
          پنل مدیریت شوید و از مسیر /admin/ استفاده کنید تا لیست نقش‌ها و کاربران نمایش داده شود.
        </p>
        <div id="adminArea" class="admin-area" style="display:none; margin-top:18px;">
          <h2>داشبورد</h2>
          <p>شما با حساب ادمین وارد شده‌اید — در این بخش میتوانید نقش‌ها و کاربران را توسط شناسه (id) مدیریت کنید.</p>
          <div>
            <a href="/cases/" class="button small" style="margin-left:8px;">ایجاد / مدیریت پرونده‌ها</a>
            <a href="/evidence/" class="button ghost small" style="margin-left:8px;">ثبت / مدیریت شواهد</a>
            <a href="/suspects/status/" class="button ghost small" style="margin-left:8px;">وضعیت مظنونین</a>
            <a href="/rewards/" class="button ghost small" style="margin-left:8px;">پاداش</a>
            <button id="showRolesBtn" class="button ghost small">نمایش نقش‌ها (ID)</button>
            <button id="showUsersBtn" class="button ghost small">نمایش کاربران (ID)</button>
            <ul id="rolesList" style="margin-top:12px; display:none"></ul>
            <ul id="usersList" style="margin-top:12px; display:none"></ul>
          </div>
          <form id="createRoleForm" class="inline-form" style="margin-top:12px;">
            <input name="code" placeholder="کد نقش (انگلیسی)" required />
            <input name="name" placeholder="نام نقش (فارسی)" required />
            <button type="submit">ایجاد نقش</button>
          </form>
          <form id="assignRoleForm" class="inline-form" style="margin-top:8px;">
            <select id="userSelect" name="userId" required>
              <option value="">انتخاب کاربر (ID - نام کاربری)</option>
            </select>
            <select id="roleSelect" name="roleId" required>
              <option value="">انتخاب نقش (ID - نام)</option>
            </select>
            <button type="submit">اختصاص نقش</button>
          </form>
          <div id="adminResult" class="result"></div>
        </div>
        <ul class="dashboard-list">
          <li>نقش‌ها تنها توسط مدیر سیستم قابل تغییر هستند.</li>
          <li>برای اختصاص نقش به کاربر از endpoint /api/users/&lt;id&gt;/roles/ استفاده کنید.</li>
          <li>کاربران جدید پس از ثبت‌نام خودکار نقش «کاربر عادی» می‌گیرند.</li>
        </ul>
      </section>
    </main>
    <script src="{% static 'demo/dashboard.js' %}" defer></script>
  </body>
</html>
