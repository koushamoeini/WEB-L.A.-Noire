{% load static %}
<!doctype html>
<html lang="fa">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>WP-Project | داشبورد</title>
    <link rel="stylesheet" href="{% static 'demo/styles.css' %}" />
  </head>
  <body dir="rtl">
    <main class="landing">
      <section class="card">
        <div class="panel-header">
          <h1>داشبورد مدیریتی</h1>
          <a href="{% url 'landing' %}" class="ghost">بازگشت</a>
        </div>
        <p class="subtitle">
          در حال حاضر این صفحه صرفاً راهنماست. برای اختصاص نقش‌ها و تعریف سطوح جدید لطفاً با حساب ادمین وارد
          پنل مدیریت شوید و از مسیر /admin/ استفاده کنید تا لیست نقش‌ها و کاربران نمایش داده شود.
        </p>
        <div id="adminArea" class="admin-area" style="display:none; margin-top:18px;">
          <h2>داشبورد</h2>
          <p>شما با حساب ادمین وارد شده‌اید — در این بخش میتوانید نقش‌ها و کاربران را توسط شناسه (id) مدیریت کنید.</p>
          <div>
            <button id="showRolesBtn">نمایش نقش‌ها</button>
            <button id="showUsersBtn">نمایش کاربران</button>
            <ul id="rolesList" style="margin-top:12px; display:none"></ul>
            <ul id="usersList" style="margin-top:12px; display:none"></ul>
          </div>
          <form id="createRoleForm" class="inline-form" style="margin-top:12px;">
            <input name="name" placeholder="نام نقش (فارسی)" required />
            <button type="submit">ایجاد نقش</button>
          </form>
          <form id="assignRoleForm" class="inline-form" style="margin-top:8px;">
            <input name="userId" placeholder="شناسه کاربر" required />
            <input name="roleId" placeholder="شناسه نقش" required />
            <button type="submit">اختصاص نقش</button>
          </form>
          <div id="adminResult" class="result"></div>
        </div>
        <ul class="dashboard-list">
          <li>نقش‌ها تنها توسط مدیر سیستم قابل تغییر هستند.</li>
          <li>برای اختصاص نقش به کاربر از endpoint /api/users/&lt;id&gt;/roles/ استفاده کنید.</li>
          <li>کاربران جدید پس از ثبت‌نام خودکار نقش «کاربر عادی» می‌گیرند.</li>
        </ul>
      </section>
    </main>
</main>
    <script>
      // ensure admin area visibility updates on load (token may be set via login)
      window.addEventListener('load', () => {
        const script = document.createElement('script');
        script.src = "{% static 'demo/dashboard.js' %}";
        document.body.appendChild(script);
      });
    </script>
  </body>
</html>
